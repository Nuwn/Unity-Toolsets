function get_url_params(t,e){if("GET"===t);else if("subdomain"!==t){if("directory"===t){var n=e.split("//"),r=n[1].split("/").splice(1),s=[];for(i in r)""!==r[i]&&s.push(r[i]);return"/"+s.join("/")+"/"}return null}}function merge_objects(t,e){var i={};for(var n in t)i[n]=t[n];for(var n in e)i[n]=e[n];return i}function Main(){this.controller=function(t){t(this)}}function $view(){this.routes=[],this.load_page=function(t,e){return new Promise(function(i,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){4==this.readyState&&(200===this.status?(document.getElementById(e).innerHTML=this.responseText,i(200)):n(Error(404)))},r.open("GET",t,!0),r.send()})},this.load_js=function(t){if(void 0!=t){!function(){if(document.getElementById("scripts")){var t=document.getElementById("scripts");t.parentElement.removeChild(t)}}();for(i in t)!function(t){if(!document.getElementById("scripts")){var e=document.getElementsByTagName("body")[0],i=document.createElement("div");i.setAttribute("id","scripts"),e.appendChild(i)}var e=document.getElementById("scripts"),n=document.createElement("script");n.src=t,e.appendChild(n)}(t[i])}},this.when=function(t,e){this.routes.push({what:t,params:e,active:!1}),this.init()},this.init=function(){function t(){a<o.params.TemplateUrl.length&&$view.load_page(o.params.TemplateUrl[a],o.params.Selector[a]).then(function(){a===o.params.TemplateUrl.length-1&&$view.load_js(o.params.Controllers),t(),a++})}var e=get_url_params("directory",window.location.href),n="/";if(e.search("#")>=0){var r=e.split("#");n="/"===r[1]?r[1]:r[1].substring(0,r[1].length-1)}var s=!0;for(i in this.routes)if(this.routes[i].what===n){var a=0,o=this.routes[i];o.active||t(this.routes),o.active=!0,s=!1}else this.routes[i].active=!1;!0===s&&this.routes.forEach(function(t){"404"===t.what&&this.load_page(t.params.TemplateUrl[0],t.params.Selector[0]).then()},this)}}var $nuwn=new Main;$nuwn.controller(function(t){});var $view=new $view;window.onhashchange=function(){$view.init()};